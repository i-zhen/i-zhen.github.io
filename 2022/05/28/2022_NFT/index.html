<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>NFTä¸€æ—¥é€šâ€”â€”Azukiçš„ERC721A | Z.Y. â˜¯ Cosmos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="æœ¬æ–‡å°è¯•å‘è¡Œä¸€æ¬¾NFTï¼Œæˆ‘ä»¬ä»åˆçº¦å‡ºå‘è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨Openseaæ¥æå®šå®šåˆ¶åŒ–å‘å¸ƒï¼Œåœ¨æ­¤ä¹‹å‰ä½ éœ€è¦å…ˆç†Ÿæ‚‰Solidityè¿™é—¨åˆçº¦è¯­è¨€ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="NFTä¸€æ—¥é€šâ€”â€”Azukiçš„ERC721A">
<meta property="og:url" content="https://izhen.me/2022/05/28/2022_NFT/index.html">
<meta property="og:site_name" content="Z.Y. â˜¯ Cosmos">
<meta property="og:description" content="æœ¬æ–‡å°è¯•å‘è¡Œä¸€æ¬¾NFTï¼Œæˆ‘ä»¬ä»åˆçº¦å‡ºå‘è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨Openseaæ¥æå®šå®šåˆ¶åŒ–å‘å¸ƒï¼Œåœ¨æ­¤ä¹‹å‰ä½ éœ€è¦å…ˆç†Ÿæ‚‰Solidityè¿™é—¨åˆçº¦è¯­è¨€ã€‚">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://izhen.me/image/nft/faucet.png">
<meta property="og:image" content="https://izhen.me/image/nft/deploy.png">
<meta property="og:image" content="https://izhen.me/image/nft/gas.png">
<meta property="og:image" content="https://izhen.me/image/nft/mint.png">
<meta property="article:published_time" content="2022-05-28T12:53:47.000Z">
<meta property="article:modified_time" content="2022-05-29T11:32:22.412Z">
<meta property="article:author" content="Zhen Yi">
<meta property="article:tag" content="NFT">
<meta property="article:tag" content="Solidity">
<meta property="article:tag" content="ERC721">
<meta property="article:tag" content="web3.js">
<meta property="article:tag" content="Ethereum">
<meta property="article:tag" content="Hardhat">
<meta property="article:tag" content="Opensea">
<meta property="article:tag" content="x072">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://izhen.me/image/nft/faucet.png">
<meta name="twitter:creator" content="@soczhenyi">
  
    <link rel="alternate" href="/atom.xml" title="Z.Y. â˜¯ Cosmos" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Z.Y. â˜¯ Cosmos</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Powered by Disqus, scientific surfing for access</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="http://sweetpotato.ai">Î»</a>
        
          <a class="main-nav-link" href="/lab">About</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://resume.izhen.me">Resume</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://github.com/i-zhen">Github</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://izhen.me"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-2022_NFT" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/05/28/2022_NFT/" class="article-date">
  <time class="dt-published" datetime="2022-05-28T12:53:47.000Z" itemprop="datePublished">2022-05-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/BLOG/">BLOG</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      NFTä¸€æ—¥é€šâ€”â€”Azukiçš„ERC721A
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>æœ¬æ–‡å°è¯•å‘è¡Œä¸€æ¬¾<code>NFT</code>ï¼Œæˆ‘ä»¬ä»åˆçº¦å‡ºå‘è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨<a target="_blank" rel="noopener" href="https://opensea.io/">Opensea</a>æ¥æå®šå®šåˆ¶åŒ–å‘å¸ƒï¼Œåœ¨æ­¤ä¹‹å‰ä½ éœ€è¦å…ˆç†Ÿæ‚‰<code>Solidity</code>è¿™é—¨åˆçº¦è¯­è¨€ã€‚</p>
<span id="more"></span>

<h3 id="NFTåŸºæœ¬è®¤è¯†"><a href="#NFTåŸºæœ¬è®¤è¯†" class="headerlink" title="NFTåŸºæœ¬è®¤è¯†"></a>NFTåŸºæœ¬è®¤è¯†</h3><h4 id="NFTæ˜¯ä»€ä¹ˆ"><a href="#NFTæ˜¯ä»€ä¹ˆ" class="headerlink" title="NFTæ˜¯ä»€ä¹ˆ"></a>NFTæ˜¯ä»€ä¹ˆ</h4><p>NFTæ˜¯Non-fungible tokençš„ç¼©å†™ï¼Œå³éåŒè´¨åŒ–ä»£å¸ï¼Œæ˜¯ä¸€ç§åœ¨åŒºå—é“¾ä¸Šçš„æ•°æ®å•ä½ï¼Œæ—¢ç„¶æ˜¯tokenï¼Œé‚£ä¹ˆå…¶å°±å…·å¤‡äº†èµ„äº§å±æ€§ã€‚è¿™ç§èµ„äº§ä¸å¯äº’æ¢ï¼Œå¯ä»¥è¢«ç¡®æƒã€‚æŠ€æœ¯ä¸Šä½œå“æœ¬èº«å¯ä»¥è¢«å¤åˆ¶ï¼Œä½†æ˜¯ä½œå“çš„æ‹¥æœ‰æƒè¢«åŒºå—é“¾æ‰€è®°å½•ä¸”å®Œæ•´è¿½è¸ªï¼Œæ‰€æœ‰æƒæ˜¯å”¯ä¸€çš„ã€‚å¦ä¸€æ–¹é¢ï¼ŒéåŒè´¨åŒ–æ˜¯è¯´ï¼šæ‰€æœ‰çš„æˆ¿å±‹éƒ½æ˜¯ä¸åŒçš„ï¼Œæ²¡æœ‰ä¸¤åªå°çŒ«æ˜¯ä¸€æ ·çš„ã€‚NFTå¯åŒºåˆ†ï¼Œå¿…é¡»åˆ†åˆ«è·Ÿè¸ªæ¯ä¸ªæ‰€æœ‰è€…ã€‚å’ŒERC20çš„åŒºåˆ«å°±åœ¨æ­¤ï¼šæ¯ä¸€ä¸ªtokenåœ¨ERC20éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”å¯ä»¥åˆ†å‰²ã€‚</p>
<h4 id="ERC721æ˜¯ä»€ä¹ˆ"><a href="#ERC721æ˜¯ä»€ä¹ˆ" class="headerlink" title="ERC721æ˜¯ä»€ä¹ˆ"></a>ERC721æ˜¯ä»€ä¹ˆ</h4><p>ERCæ˜¯Ethereum Request for Commentsçš„ç¼©å†™ï¼Œæ˜¯ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¼€å‘äººå‘˜ä½¿ç”¨çš„æŠ€æœ¯æ–‡æ¡£ï¼Œå®šä¹‰ä¸€ç»„å‡†åˆ™æˆ–åè®®ã€‚æ¯”å¦‚ERC20å®šä¹‰äº†ä»£å¸æ ‡å‡†ï¼Œ<a target="_blank" rel="noopener" href="https://eips.ethereum.org/EIPS/eip-721">ERC721</a>å®šä¹‰äº†NFTæ ‡å‡†ã€‚å…¶ä¸­ERC721ä¾èµ–ERC165ã€‚</p>
<h4 id="å¦‚ä½•å‘è¡ŒNFT"><a href="#å¦‚ä½•å‘è¡ŒNFT" class="headerlink" title="å¦‚ä½•å‘è¡ŒNFT"></a>å¦‚ä½•å‘è¡ŒNFT</h4><p>ä¸€ç§æ˜¯ä½¿ç”¨<code>Opensea</code>è¿™ç±»ç½‘ç«™å‘è¡Œï¼Œå‡†å¤‡å¥½<code>Gas fee</code>åï¼Œåªéœ€è¦ç‚¹å‡ æ¬¡é¼ æ ‡ï¼Œå†™ä¸€ç‚¹ä»‹ç»å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬è¿™æ¬¡ä¸å‡†å¤‡ç”¨è¿™ç§æ–¹å¼ï¼Œè€Œæ˜¯é€šè¿‡æ™ºèƒ½åˆçº¦æ¥å‘å¸ƒä¸€æ¬¾NFTã€‚</p>
<h4 id="å‘è¡ŒNFTçš„æµç¨‹"><a href="#å‘è¡ŒNFTçš„æµç¨‹" class="headerlink" title="å‘è¡ŒNFTçš„æµç¨‹"></a>å‘è¡ŒNFTçš„æµç¨‹</h4><p>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®æˆ‘ä»¬çš„NFTæ‰€é”šå®šçš„å¯¹è±¡ï¼Œæ˜¯ä¸€ç»„å›¾ç‰‡è¿˜æ˜¯ä¸€ç»„éŸ³ä¹ã€Næ®µæ•…äº‹ã€è´·æ¬¾ï¼Œäº¦æˆ–æ˜¯å®ä½“è´¢äº§ã€‚æˆ‘ä»¬å‘è¡Œçš„NFTçš„æ•°é‡ï¼Œå‘è¡Œä»·æ ¼ï¼Œæ˜¯å¦åŒ…å«free mintï¼Œç™½åå•ç­‰ç­‰ä¸€ç³»åˆ—ç»æµæ¨¡å‹ã€‚ç®€å•è¯´æœ‰å¦‚ä¸‹å‡ æ­¥ï¼š</p>
<ol start="0">
<li>ç†Ÿè¯»ERC721åˆçº¦çš„æ ‡å‡†ï¼Œçœ‹ä¸€çœ‹ç°æœ‰çš„å®ç°</li>
<li>è®¾è®¡NFTï¼Œæ•…äº‹ï¼Œç™½çš®ä¹¦ç­‰</li>
<li>ç¼–å†™NFTåˆçº¦ï¼Œå¹¶ä¸Šé“¾ï¼›å‘¨è¾¹é…å¥—çš„å¼€å‘ï¼Œæ¯”å¦‚ä¸€æ¬¾<a href="https://izhen.me/2022/05/23/2022_DApp/">DApp</a>ï¼ŒDAppçš„å¼€å‘ä¸æ˜¯æœ¬ç¯‡çš„é‡ç‚¹ï¼Œæˆ‘ä»¬åªå…³æ³¨åˆçº¦éƒ¨åˆ†</li>
<li>åšç¤¾åŒºï¼Œæ‹‰ç›˜</li>
</ol>
<h3 id="å®‰è£…ä¸åˆå§‹åŒ–æœ¬åœ°Hardhat"><a href="#å®‰è£…ä¸åˆå§‹åŒ–æœ¬åœ°Hardhat" class="headerlink" title="å®‰è£…ä¸åˆå§‹åŒ–æœ¬åœ°Hardhat"></a>å®‰è£…ä¸åˆå§‹åŒ–æœ¬åœ°Hardhat</h3><p>åˆçº¦å¼€å‘çš„å·¥ä½œæµçš„å¸‚åœºä»½é¢å½“å‰è¢«<a target="_blank" rel="noopener" href="https://hardhat.org/">Hardhat</a>å æ®ä¸»å¯¼åœ°ä½ï¼Œæœ¬ç¯‡æˆ‘ä»¬ä½¿ç”¨<code>Hardhat</code>å¼€å‘æˆ‘ä»¬çš„åˆçº¦ã€‚è¯·æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ¥é…ç½®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir my-erc721</span><br><span class="line">$ <span class="built_in">cd</span> my-erc721</span><br><span class="line">$ npm init</span><br><span class="line">$ npm install --save-dev hardhat</span><br><span class="line">$ npx hardhat</span><br><span class="line">...</span><br><span class="line">ğŸ‘· Welcome to Hardhat v2.9.6 ğŸ‘·â€</span><br><span class="line">âœ” What <span class="keyword">do</span> you want to <span class="keyword">do</span>? Â· Create a basic sample project <span class="comment"># é€‰æ‹©é€‚åˆæˆ‘ä»¬çš„é€‰é¡¹</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å¥½åï¼Œæˆ‘ä»¬ä¼šåœ¨<code>contracts</code>ç›®å½•å†…ç¼–å†™æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ï¼Œåœ¨<code>scripts</code>ä¸­ç¼–å†™<code>js</code>è¯­è¨€çš„éƒ¨ç½²è„šæœ¬ï¼Œå¹¶åœ¨<code>hardhat.config.js</code>é…ç½®éƒ¨ç½²å’Œç¼–è¯‘ä¿¡æ¯ç­‰ã€‚</p>
<h3 id="NFTåˆçº¦ç¼–å†™"><a href="#NFTåˆçº¦ç¼–å†™" class="headerlink" title="NFTåˆçº¦ç¼–å†™"></a>NFTåˆçº¦ç¼–å†™</h3><p>ç›®å‰æœ€ä¸ºæµè¡Œçš„<code>ERC721</code>æ ‡å‡†å®ç°å½“ç„¶æ˜¯é¼é¼å¤§åçš„<code>OpenZeppelin</code>ï¼Œä»–çš„å®ç°åœ¨å®‰å…¨æ€§ã€å®Œæˆåº¦ã€å¯ç»´æŠ¤æ€§å’Œæµ‹è¯•ç­‰æ–¹é¢éƒ½åšçš„å¾ˆä¸é”™ã€‚ä½†æ˜¯å…¶<code>gas fee</code>å­˜åœ¨ä¸€äº›è¾ƒå¤§æ¶ˆè€—ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çŸ¥åNFTé¡¹ç›®<a target="_blank" rel="noopener" href="https://www.azuki.com/">azuki</a>çš„<a target="_blank" rel="noopener" href="https://www.erc721a.org/">ERC721A</a>å®ç°ã€‚è¿™æ˜¯ä¸€ç‰ˆæ”¹è¿›å®ç°ï¼Œç‰¹åˆ«é‡è§†äº†åˆçº¦çš„è¿è¡Œæ•ˆç‡ï¼Œä¼˜åŒ–äº†<code>gas fee</code>ï¼Œè€Œä¸”åˆçº¦ä¾èµ–æ›´å°‘ã€‚</p>
<p>å…ˆå®‰è£…åˆçº¦ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save-dev erc721a</span><br><span class="line">$ npm install @openzeppelin/contracts</span><br></pre></td></tr></table></figure>

<p>æ¥ç€æˆ‘ä»¬ç¼–å†™åˆçº¦ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;erc721a/contracts/ERC721A.sol&quot;</span>; <span class="comment">// å¯¼å…¥ERC721A</span></span><br><span class="line"></span><br><span class="line">contract ZY is ERC721A &#123;</span><br><span class="line">    <span class="title">constructor</span>(<span class="params"></span>) <span class="title">ERC721A</span>(<span class="params"><span class="string">&quot;Zy&quot;</span>, <span class="string">&quot;ZY&quot;</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">mint</span>(<span class="params">uint256 quantity</span>) <span class="title">external</span> <span class="title">payable</span> </span>&#123;</span><br><span class="line">        <span class="comment">// _safeMint&#x27;s second argument now takes in a quantity, not a tokenId.</span></span><br><span class="line">        _safeMint(msg.sender, quantity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºAzukiçš„ERC721Aå·²ç»å¸®åŠ©æˆ‘ä»¬å®ç°ç»å¤§éƒ¨åˆ†åŠŸèƒ½äº†ï¼Œæ‰€ä»¥æœ€ç®€å•çš„ä½¿ç”¨å°±æ˜¯å®šä¹‰<code>mint</code>å‡½æ•°ã€‚å½“ç„¶å› ä¸ºæ²¡æœ‰å®šä¹‰ç™½åå•ï¼Œmintç›¸å…³çš„é™åˆ¶ç­‰ï¼ˆè€Œè¿™äº›éœ€è¦æ ¹æ®ç™½çš®ä¹¦çš„å†…å®¹æ¥ç¡®å®šï¼‰ï¼Œè¿™ä¸ªåˆçº¦å¹¶éäº§å“çº§ä»£ç ï¼Œè¿˜éœ€è¦å¤§é‡çš„ç»†åŒ–ç‰¹åˆ«æ˜¯å®‰å…¨æ€§ç›¸å…³çš„æµ‹è¯•ã€‚</p>
<p>å®Œæˆåç¼–è¯‘åˆçº¦ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx hardhat compile</span><br></pre></td></tr></table></figure>

<p>æ”¹å†™é»˜è®¤çš„<code>sample-scripts.js</code>å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hre = <span class="built_in">require</span>(<span class="string">&quot;hardhat&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> NFT = <span class="keyword">await</span> hre.ethers.getContractFactory(<span class="string">&quot;NFT&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> nft = <span class="keyword">await</span> NFT.deploy();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> nft.deployed();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;My NFT deployed to:&quot;</span>, nft.address);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line">  .then(<span class="function">() =&gt;</span> process.exit(<span class="number">0</span>))</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error);</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨Infuraè¿›è¡Œçº¿ä¸Šæµ‹è¯•"><a href="#ä½¿ç”¨Infuraè¿›è¡Œçº¿ä¸Šæµ‹è¯•" class="headerlink" title="ä½¿ç”¨Infuraè¿›è¡Œçº¿ä¸Šæµ‹è¯•"></a>ä½¿ç”¨Infuraè¿›è¡Œçº¿ä¸Šæµ‹è¯•</h3><p>Infuraæ˜¯æœ€æ—©å’Œç›®å‰æœ€å¤§çš„Ethereumçš„Relay Networkè§£å†³æ–¹æ¡ˆï¼Œæä¾›ä¸€äº›å…¬å¼€çš„GatawayèŠ‚ç‚¹ã€‚æˆ‘ä»¬ä¼šä¸Infuraçš„apiè¿›è¡Œäº¤äº’ï¼Œè€ŒInfuraä½œä¸ºä¸­ä»‹ä¼šåœ¨ä»–ä»¬çš„äº‘ä¸Šç®¡ç†çš„èŠ‚ç‚¹ä¸­æ‰§è¡Œç›¸å…³æ“ä½œå®Œæˆæœ€ç»ˆè°ƒç”¨ã€‚</p>
<h4 id="é…ç½®rinkeby"><a href="#é…ç½®rinkeby" class="headerlink" title="é…ç½®rinkeby"></a>é…ç½®rinkeby</h4><p>è¿™æ˜¯NFTäº¤æ˜“ä¸­ä¸»æµçš„æµ‹è¯•ç½‘ç»œã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ npm install dotenv</span><br><span class="line">$ touch .env</span><br><span class="line"><span class="comment"># ç¼–è¾‘.env</span></span><br><span class="line">PRIVATE_KEY=[æ‰“å¼€é’±åŒ…-è´¦å·è¯¦æƒ…-&gt;å¯¼å‡ºç§é’¥] æŠŠç§é’¥å¡«å†™åœ¨è¿™é‡Œï¼Œåˆ‡å¿Œä¸è¦é€éœ²ç§é’¥ç»™ä»»ä½•äºº</span><br><span class="line">API=https://rinkeby.infura.io/v3/&#123;ä»¥åŠä½ çš„ProjectIDï¼Œä»Infuraå¤åˆ¶&#125;</span><br><span class="line">PUBLIC_KEY=metamaské’±åŒ…åœ°å€</span><br><span class="line">NETWORK=rinkeby</span><br><span class="line">API_KEY=Infuraä¸Šæ–°å»ºé¡¹ç›®çš„ProjectID</span><br></pre></td></tr></table></figure>

<p>é…ç½®<code>hardhat.config.js</code>ï¼Œä»¥ä¸‹ä¸ºæ–°å¢å†…å®¹ï¼ˆä¸å«æ—¢æœ‰å†…å®¹ï¼‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;dotenv&#x27;</span>).config();</span><br><span class="line"><span class="keyword">const</span> &#123; API, PRIVATE_KEY &#125; = process.env;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">solidity</span>: <span class="string">&quot;0.8.4&quot;</span>,</span><br><span class="line">  <span class="attr">defaultNetwork</span>: <span class="string">&quot;rinkeby&quot;</span>,</span><br><span class="line">  <span class="attr">networks</span>: &#123;</span><br><span class="line">    <span class="attr">hardhat</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">rinkeby</span>: &#123;</span><br><span class="line">      <span class="attr">url</span>: API,</span><br><span class="line">      <span class="attr">accounts</span>: [<span class="string">`0x<span class="subst">$&#123;PRIVATE_KEY&#125;</span>`</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä»<a target="_blank" rel="noopener" href="https://faucet.rinkeby.io/">Rinkeby Authenticated Faucet</a>æ°´é¾™å¤´è·å–ä¸€äº›æµ‹è¯•ç”¨ETHã€‚æˆ‘ä»¬å¤åˆ¶Metamaské’±åŒ…åœ°å€ï¼Œå¹¶å‘ä¸€æ¡twitterï¼Œç„¶åå¤åˆ¶è¿™æ¡æ¨ç‰¹çš„åœ°å€è¾“å…¥ä»¥è·å¾—ä»¥å¤ª:</p>
<p><img src="/image/nft/faucet.png" alt="twitter"></p>
<p>å½“æˆ‘ä»¬çš„é’±åŒ…ä¸­æœ‰ä»¥å¤ªåï¼Œå¼€å§‹éƒ¨ç½²åˆçº¦ï¼Œå¹¶åœ¨<a target="_blank" rel="noopener" href="https://rinkeby.etherscan.io/">rinkeby Etherscan</a>æ‰¾åˆ°æˆ‘ä»¬çš„åˆçº¦ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npx hardhat --network rinkeby run scripts/sample-script.js </span><br><span class="line">My NFT deployed to: 0x...[åˆçº¦åœ°å€]</span><br></pre></td></tr></table></figure>

<p>éƒ¨ç½²ä¿¡æ¯æŸ¥è¯¢å¦‚ä¸‹ï¼š</p>
<p><img src="/image/nft/deploy.png" alt="deploy"></p>
<p>ä¸€äº›å…·ä½“ä¿¡æ¯ï¼Œæ¯”å¦‚gas feeï¼š</p>
<p><img src="/image/nft/gas.png" alt="gas fee"></p>
<h3 id="mintç¬¬ä¸€ä¸ªNFT"><a href="#mintç¬¬ä¸€ä¸ªNFT" class="headerlink" title="mintç¬¬ä¸€ä¸ªNFT"></a>mintç¬¬ä¸€ä¸ªNFT</h3><p>ç¼–å†™æˆ‘ä»¬çš„mintè„šæœ¬<code>scripts/mint.js</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&quot;dotenv&quot;</span>).config()</span><br><span class="line"><span class="keyword">const</span> hh = <span class="built_in">require</span>(<span class="string">&quot;hardhat&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> PRIVATE_KEY = process.env.PRIVATE_KEY</span><br><span class="line"><span class="keyword">const</span> NETWORK = process.env.NETWORK</span><br><span class="line"><span class="keyword">const</span> API_KEY = process.env.API_KEY</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> provider = <span class="keyword">new</span> hh.ethers.providers.InfuraProvider(NETWORK, API_KEY);</span><br><span class="line"><span class="keyword">const</span> abi = <span class="built_in">require</span>(<span class="string">&quot;../artifacts/contracts/NFT.sol/ZY.json&quot;</span>).abi</span><br><span class="line"><span class="keyword">const</span> contractAddress = <span class="string">&quot;åˆçº¦åœ°å€åœ¨è¿™é‡Œè¡¥å……&quot;</span></span><br><span class="line"><span class="keyword">const</span> contract = <span class="keyword">new</span> hh.ethers.Contract(contractAddress, abi, provider)</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="keyword">new</span> hh.ethers.Wallet(PRIVATE_KEY, provider)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> contractWithSigner = contract.connect(wallet);</span><br><span class="line">    <span class="keyword">const</span> price = <span class="number">100</span>; <span class="comment">// mintçš„ä»£ä»·ï¼Œè¿™é‡Œæ˜¯100weiï¼›æ­£å¼éƒ¨ç½²å½“ç„¶è¦å®šä¹‰åˆ°åˆçº¦ä¸­</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;price is &quot;</span> + price);</span><br><span class="line">    <span class="keyword">const</span> tx = <span class="keyword">await</span> contractWithSigner.mint(<span class="number">1</span>, &#123; <span class="attr">value</span>: price&#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(tx.hash);</span><br><span class="line">    <span class="keyword">await</span> tx.wait();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;mint success&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line">    .then(<span class="function">() =&gt;</span> process.exit(<span class="number">0</span>))</span><br><span class="line">    .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(error);</span><br><span class="line">        process.exit(<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<p>æ¥ç€æ‰§è¡Œåˆçº¦ï¼ŒæŸ¥çœ‹æ•ˆæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npx hardhat --network rinkeby run scripts/mint.js</span><br><span class="line">price is 100</span><br><span class="line">0x36d2eedc4b...[transactionçš„Id]</span><br><span class="line">mint success</span><br></pre></td></tr></table></figure>

<p><img src="/image/nft/mint.png" alt="mint"></p>
<h3 id="ä½¿ç”¨å»ä¸­å¿ƒæ–‡ä»¶æœåŠ¡è®¾ç½®èµ„æº"><a href="#ä½¿ç”¨å»ä¸­å¿ƒæ–‡ä»¶æœåŠ¡è®¾ç½®èµ„æº" class="headerlink" title="ä½¿ç”¨å»ä¸­å¿ƒæ–‡ä»¶æœåŠ¡è®¾ç½®èµ„æº"></a>ä½¿ç”¨å»ä¸­å¿ƒæ–‡ä»¶æœåŠ¡è®¾ç½®èµ„æº</h3><p>æˆ‘ä»¬é€‰æ‹©çš„NFTæ˜¯æ²¡æœ‰å’Œä»»ä½•èµ„æºï¼ˆå›¾ç‰‡ã€éŸ³ä¹ç­‰ï¼‰é”šå®šçš„ï¼Œè¿™éœ€è¦æˆ‘ä»¬æ–°æ‰‹è®¾å®šï¼Œè¯¦è§<code>IERC721 Metadata-tokenURI</code>ã€‚åœ¨<code>ERC721A</code>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°<code>_baseURI</code>å‡½æ•°çš„ä»£ç ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å°±æ˜¯èµ„æºçš„æ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¯´NFTçš„èµ„æºã€‚é»˜è®¤æ˜¯è¿”å›<code>&#39;&#39;</code>ï¼Œä¹Ÿå°±æ˜¯æ— èµ„æºè®¾å®šï¼Œæˆ‘ä»¬éœ€è¦overrideå¹¶åŠ å…¥å¯ä»¥è®¾å®šèµ„æºURIçš„æ–¹æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@dev </span>Base URI for computing &#123;tokenURI&#125;. If set, the resulting URI for each</span></span><br><span class="line"><span class="comment"> * token will be the concatenation of the `baseURI` and the `tokenId`. Empty</span></span><br><span class="line"><span class="comment"> * by default, can be overriden in child contracts.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_baseURI</span>(<span class="params"></span>) <span class="title">internal</span> <span class="title">view</span> <span class="title">virtual</span> <span class="title">returns</span> (<span class="params">string memory</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="function"><span class="keyword">function</span> <span class="title">tokenURI</span>(<span class="params">uint256 tokenId</span>) <span class="title">override</span> <span class="title">view</span> <span class="title">public</span> <span class="title">returns</span> (<span class="params">string memory</span>)</span></span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬é€‰æ‹©<a target="_blank" rel="noopener" href="https://docs.ipfs.io/how-to/best-practices-for-nft-data/#types-of-ipfs-links-and-when-to-use-them">IPFS</a>æœåŠ¡æ¥å­˜æ”¾æˆ‘ä»¬çš„èµ„æºæ–‡ä»¶(mirror.xyzä½¿ç”¨ArweaveæœåŠ¡ï¼Œè€ƒè™‘åˆ°æ”¯æŒåº¦çš„é—®é¢˜ï¼Œå¯èƒ½å¾—ç”¨httpsç½‘å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬æš‚æ—¶è¿˜æ˜¯é€‰ç”¨å—ä¼—è¾ƒå¹¿çš„IPFS)ã€‚è¿™é‡Œå¯ä»¥é€‰ç”¨<a target="_blank" rel="noopener" href="https://app.pinata.cloud/">Pinata</a>ã€‚æ³¨å†Œè´¦æˆ·åæŒ‰ç…§æç¤ºä¸Šä¼ æˆ‘ä»¬äº‹å…ˆå‡†å¤‡å¥½çš„å›¾ç‰‡èµ„æºæ–‡ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œè€Œä¸æ˜¯å•å¼ å›¾ç‰‡ã€‚ç„¶åæˆ‘ä»¬å‡†å¤‡metadataæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸Šä¼ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir img      # æ”¾å…¥å›¾ç‰‡ï¼Œåå­—ç”¨æ•°å­—ä»0å¼€å§‹ï¼Œæ¯”å¦‚0.png, 1.png ..</span><br><span class="line">...</span><br><span class="line">$ mkdir metadata # å¯¹äºæ¯ä¸€å¼ å›¾ç‰‡ï¼Œéƒ½å‡†å¤‡ä¸€ä¸ªmetadataï¼Œæ–‡ä»¶åæ˜¯0, 1, .. </span><br><span class="line">$ cd metadata</span><br><span class="line">$ touch 0</span><br><span class="line">$ vim 0          # ç¼–è¾‘metadataæ–‡ä»¶</span><br><span class="line"># æ–‡ä»¶0ä¸­å†…å®¹å¦‚ä¸‹ç¤ºä¾‹ï¼š</span><br><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;my-nft&quot;,</span><br><span class="line">    &quot;attributes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;trait_type&quot;: &quot;tokenID&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;0&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;description&quot;: &quot;a image&quot;,</span><br><span class="line">    # ä¸‹é¢çš„imageå¡«å†™Pinataä¸Šé¢çš„CIDåœ°å€ï¼›å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯httpçš„</span><br><span class="line">    &quot;image&quot;: &quot;ipfs://QmVxF5gdE4hu27tGp3jTfxf7j3cBzhmyYcZeFTP9irgmdQ/0.png&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œç»™å‡ºä¸€ä¸ªå¸¦æœ‰ç™½åå•ã€free mintã€å¯ä»¥<code>self destruct</code>å’Œå¯è®¾å®šå¤–éƒ¨èµ„æºçš„åˆçº¦ï¼Œä»…ä¾›å‚è€ƒï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;erc721a/contracts/ERC721A.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@openzeppelin/contracts/access/Ownable.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract ZY is ERC721A, Ownable &#123;</span><br><span class="line">    event Log(string message, uint number);</span><br><span class="line">    event Mint(string message, address indexed receiver);</span><br><span class="line">    uint256 public constant PRICE_PER_TOKEN = <span class="number">0.0001</span> ether;</span><br><span class="line">    string private _resourceURI;</span><br><span class="line">    address[] private white_list;</span><br><span class="line">    address[] private free_mint;</span><br><span class="line">    mapping(<span class="function"><span class="params">address</span> =&gt;</span> bool) public minted;</span><br><span class="line">    </span><br><span class="line">    <span class="title">constructor</span>(<span class="params"></span>) <span class="title">ERC721A</span>(<span class="params"><span class="string">&quot;zy&quot;</span>, <span class="string">&quot;ZY&quot;</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    modifier <span class="function"><span class="title">gasCheck</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        uint cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (uint i = <span class="number">0</span>; i &lt; white_list.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!minted[white_list[i]]) &#123;</span><br><span class="line">                cnt += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">require</span>(msg.value &gt;= cnt * PRICE_PER_TOKEN, <span class="string">&quot;Not Enough Gas for Mint&quot;</span>);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">mint</span>(<span class="params">uint256 quantity</span>) <span class="title">external</span> <span class="title">payable</span> <span class="title">onlyOwner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// _safeMint&#x27;s second argument now takes in a quantity, not a tokenId.</span></span><br><span class="line">        _safeMint(msg.sender, quantity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">mintList</span>(<span class="params">address[] storage list</span>) <span class="title">internal</span> </span>&#123;</span><br><span class="line">        uint cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (uint i = <span class="number">0</span>; i &lt; list.length; ++i) &#123;</span><br><span class="line">            address current = list[i];</span><br><span class="line">            <span class="keyword">if</span> (!minted[current]) &#123;</span><br><span class="line">                _safeMint(current, <span class="number">1</span>);</span><br><span class="line">                minted[current] = <span class="literal">true</span>;</span><br><span class="line">                emit Mint(<span class="string">&quot;Minted to &quot;</span>, current);</span><br><span class="line">                cnt += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        emit Log(<span class="string">&quot;Totally Minted &quot;</span>, cnt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">mint2wl</span>(<span class="params"></span>) <span class="title">external</span> <span class="title">payable</span> <span class="title">onlyOwner</span>(<span class="params"></span>) <span class="title">gasCheck</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        mintList(white_list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">mint2free</span>(<span class="params"></span>) <span class="title">external</span> <span class="title">payable</span> <span class="title">onlyOwner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        mintList(free_mint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addWhiteListMember</span>(<span class="params">address wlMember</span>) <span class="title">external</span> <span class="title">onlyOwner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        white_list.push(wlMember);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addFreeMintMember</span>(<span class="params">address member</span>) <span class="title">external</span> <span class="title">onlyOwner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        free_mint.push(member);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setResourceURI</span>(<span class="params">string calldata resourceURI_</span>) <span class="title">external</span> <span class="title">onlyOwner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        _resourceURI = resourceURI_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_baseURI</span>(<span class="params"></span>) <span class="title">internal</span> <span class="title">view</span> <span class="title">virtual</span> <span class="title">override</span> <span class="title">returns</span> (<span class="params">string memory</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _resourceURI;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">kill</span>(<span class="params"></span>) <span class="title">external</span> <span class="title">onlyOwner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        selfdestruct(payable(msg.sender));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>IPFSå®˜æ–¹ä¹Ÿæœ‰ç›¸å…³çš„<a target="_blank" rel="noopener" href="https://docs.ipfs.io/how-to/mint-nfts-with-ipfs/">æ•™ç¨‹</a>å¯ä¾›å‚è€ƒã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¡¥å……åˆçº¦äº¤äº’JSè„šæœ¬ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤´éƒ¨å’Œä¸Šé¢çš„JSä¸€è‡´ï¼Œé…ç½®é’±åŒ…ã€åˆçº¦åœ°å€å’ŒAPI</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">mint</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> contractWithSigner = contract.connect(wallet);</span><br><span class="line">    <span class="keyword">const</span> price = <span class="number">100</span>; <span class="comment">// mintçš„ä»£ä»·ï¼Œéœ€è¦å¤šå°‘Etherï¼Œæ­£å¼éƒ¨ç½²å½“ç„¶è¦å®šä¹‰åˆ°åˆçº¦ä¸­</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;price is &quot;</span> + price);</span><br><span class="line">    <span class="keyword">const</span> tx = <span class="keyword">await</span> contractWithSigner.mint(<span class="number">1</span>, &#123; <span class="attr">value</span>: price&#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(tx.hash);</span><br><span class="line">    <span class="keyword">await</span> tx.wait();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;mint success&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">kill</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> contractWithSigner = contract.connect(wallet);</span><br><span class="line">    <span class="keyword">const</span> tx = <span class="keyword">await</span> contractWithSigner.kill()</span><br><span class="line">    <span class="built_in">console</span>.log(tx.hash);</span><br><span class="line">    <span class="keyword">await</span> tx.wait();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;self destruct success&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">setResourceURI</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> contractWithSigner = contract.connect(wallet);</span><br><span class="line">    <span class="comment">// æ³¨æ„è¿™é‡Œä¸æ˜¯HTTP Gateway</span></span><br><span class="line">    <span class="comment">// ä¾‹å¦‚ï¼šipfs://QmZ6Qrb9AZcMSyQJKAwkT7eUgjG8o3ixhcfrNv8Hye35dX/ </span></span><br><span class="line">    <span class="comment">//                                       ä¸è¦å¿˜è®°æœ€åçš„&#x27;/&#x27;_____^</span></span><br><span class="line">    <span class="keyword">const</span> tx = <span class="keyword">await</span> contractWithSigner.setResourceURI(<span class="string">&quot;è¿™é‡Œå¡«å†™ä½ çš„èµ„æºæ–‡ä»¶URI&quot;</span>) </span><br><span class="line">    <span class="built_in">console</span>.log(tx.hash);</span><br><span class="line">    <span class="keyword">await</span> tx.wait();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;setBaseURL success&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mainå‡½æ•°çš„æ‰§è¡Œå’Œä¸Šé¢JSä¸€æ ·</span></span><br></pre></td></tr></table></figure>

<p>Openseaæµ‹è¯•ç½‘çš„æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><nft-card
    contractAddress="0x5de64128300db09e4842abbf1f2ca6e425f78945"
    tokenId="0" network="rinkeby"><br></nft-card></p>
<script src="https://unpkg.com/embeddable-nfts/dist/nft-card.min.js"></script>

<h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p><a target="_blank" rel="noopener" href="https://testnets.opensea.io/">Opensea Testnets</a>å’Œ<a target="_blank" rel="noopener" href="https://rinkeby.looksrare.org/">Looksrare Rinkeby</a>éƒ½å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„<code>mint</code>ç»“æœï¼Œæ‰§è¡Œå®Œäº‹åŠ¡ååˆ°ä¸Šé¢å»çœ‹çœ‹å§ã€‚æœ¬ç¯‡æ–‡ç« çš„<a target="_blank" rel="noopener" href="https://testnets.opensea.io/assets/rinkeby/0x5de64128300db09e4842abbf1f2ca6e425f78945/0">ä¾‹å­</a>ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://izhen.me/2022/05/28/2022_NFT/" data-id="cl3ptc2cg0000wldxas743mz6" data-title="NFTä¸€æ—¥é€šâ€”â€”Azukiçš„ERC721A" class="article-share-link">Share</a>
      
        <a href="https://izhen.me/2022/05/28/2022_NFT/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ERC721/" rel="tag">ERC721</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ethereum/" rel="tag">Ethereum</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hardhat/" rel="tag">Hardhat</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NFT/" rel="tag">NFT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Opensea/" rel="tag">Opensea</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Solidity/" rel="tag">Solidity</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web3-js/" rel="tag">web3.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/x072/" rel="tag">x072</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2022/05/23/2022_DApp/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">DAppä¸€æ—¥é€šâ€”â€”web3.jsã€Truffleä¸Dfinityç¯‡</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2009-2022 Zhen Yi<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
      <br>
      <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
      <span class="site-uv">ç”¨æˆ·è®¿é—®: <span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
      <span class="site-pv">æœ¬ç«™è®¿é—®: <span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a target="_blank" rel="noopener" href="http://sweetpotato.ai" class="mobile-nav-link">Î»</a>
  
    <a href="/lab" class="mobile-nav-link">About</a>
  
    <a target="_blank" rel="noopener" href="https://resume.izhen.me" class="mobile-nav-link">Resume</a>
  
    <a target="_blank" rel="noopener" href="https://github.com/i-zhen" class="mobile-nav-link">Github</a>
  
</nav>
    
<script>
  var disqus_shortname = 'izhen';
  
  var disqus_url = 'https://izhen.me/2022/05/28/2022_NFT/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.async = true;
    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>